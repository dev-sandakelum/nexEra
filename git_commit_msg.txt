feat: Implement atomic user creation with deduplication in Firestore

- Introduced a new function `getOrCreateUserAtomic` to handle user creation atomically, preventing duplicates by using a deterministic user ID based on email.
- Added an in-memory map to deduplicate concurrent user creation requests.
- Deprecated the legacy `createNewUser` function in favor of the new atomic approach.
- Enhanced error handling and logging for user creation processes.